<!-- pages/index/index.wxml -->
<view class="container">
  <!-- å¤´éƒ¨Banner -->
  <view class="banner">
    <view class="banner-content">
      <view class="banner-title">åœºé¦†é¢„çº¦ Â· åœè½¦ç™»è®°</view>
      <view class="banner-subtitle">ä¾¿æ·æœåŠ¡ï¼Œä¸€é”®é¢„çº¦</view>
    </view>
  </view>

  <!-- å¿«æ·å…¥å£ -->
  <view class="quick-actions card">
    <view class="action-item" bindtap="goToVenueList">
      <view class="action-icon venue-icon">ğŸŸï¸</view>
      <view class="action-text">åœºé¦†é¢„çº¦</view>
    </view>
    <view class="action-item" bindtap="goToParking">
      <view class="action-icon parking-icon">ğŸš—</view>
      <view class="action-text">åœè½¦ç™»è®°</view>
    </view>
    <view class="action-item" bindtap="goToMyBookings">
      <view class="action-icon booking-icon">ğŸ“‹</view>
      <view class="action-text">æˆ‘çš„é¢„çº¦</view>
    </view>
    <view class="action-item" bindtap="goToParkingRecords">
      <view class="action-icon record-icon">ğŸ“</view>
      <view class="action-text">åœè½¦è®°å½•</view>
    </view>
  </view>

  <!-- åœè½¦ä½çŠ¶æ€ -->
  <view class="section" wx:if="{{parkingStatus}}">
    <view class="section-header">
      <view class="section-title">è½¦ä½çŠ¶æ€</view>
    </view>
    <view class="parking-status card">
      <view class="status-item">
        <view class="status-value">{{parkingStatus.totalSpaces}}</view>
        <view class="status-label">æ€»è½¦ä½</view>
      </view>
      <view class="status-divider"></view>
      <view class="status-item">
        <view class="status-value text-success">{{parkingStatus.availableSpaces}}</view>
        <view class="status-label">ç©ºé—²</view>
      </view>
      <view class="status-divider"></view>
      <view class="status-item">
        <view class="status-value text-warning">{{parkingStatus.usedSpaces}}</view>
        <view class="status-label">å·²å ç”¨</view>
      </view>
    </view>
  </view>

  <!-- çƒ­é—¨åœºé¦† -->
  <view class="section">
    <view class="section-header">
      <view class="section-title">çƒ­é—¨åœºé¦†</view>
      <view class="section-more" bindtap="goToVenueList">æŸ¥çœ‹æ›´å¤š ></view>
    </view>
    
    <view class="loading" wx:if="{{loading}}">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
    
    <view class="venue-list" wx:elif="{{venues.length > 0}}">
      <view 
        class="venue-card card" 
        wx:for="{{venues}}" 
        wx:key="_id"
        bindtap="goToVenueDetail"
        data-id="{{item._id}}"
      >
        <view class="venue-image">
          <image 
            src="{{item.images[0] || '/images/venue-default.png'}}" 
            mode="aspectFill"
          ></image>
          <view class="venue-type-tag">{{item.typeIcon}} {{item.typeText}}</view>
        </view>
        <view class="venue-info">
          <view class="venue-name">{{item.name}}</view>
          <view class="venue-location text-hint">ğŸ“ {{item.location}}</view>
          <view class="venue-price">
            <text class="price-value">Â¥{{item.price}}</text>
            <text class="price-unit">/{{item.priceUnit || 'å°æ—¶'}}</text>
          </view>
        </view>
      </view>
    </view>
    
    <view class="empty-state" wx:else>
      <view class="empty-text">æš‚æ— å¯é¢„çº¦åœºé¦†</view>
    </view>
  </view>
</view>
