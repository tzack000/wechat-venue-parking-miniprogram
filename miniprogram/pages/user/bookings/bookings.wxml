<!-- pages/user/bookings/bookings.wxml -->
<view class="container">
  <!-- çŠ¶æ€ç­›é€‰ -->
  <scroll-view class="status-filter" scroll-x enable-flex>
    <view 
      class="status-item {{currentStatus === item.value ? 'active' : ''}}"
      wx:for="{{statusTabs}}"
      wx:key="value"
      bindtap="onStatusChange"
      data-status="{{item.value}}"
    >
      {{item.label}}
    </view>
  </scroll-view>

  <!-- é¢„çº¦åˆ—è¡¨ -->
  <view class="booking-list">
    <view 
      class="booking-item card"
      wx:for="{{bookings}}"
      wx:key="_id"
    >
      <view class="booking-header">
        <view class="venue-name">{{item.venueTypeIcon}} {{item.venueName}}</view>
        <view class="booking-status {{item.statusClass}}">{{item.statusText}}</view>
      </view>
      
      <view class="booking-info" bindtap="onViewDetail" data-id="{{item._id}}">
        <view class="info-row">
          <text class="info-label">é¢„çº¦æ—¥æœŸ</text>
          <text class="info-value">{{item.date}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">é¢„çº¦æ—¶æ®µ</text>
          <text class="info-value">{{item.startTime}} - {{item.endTime}}</text>
        </view>
        <view class="info-row">
          <text class="info-label">é¢„çº¦äºº</text>
          <text class="info-value">{{item.userName}} {{item.userPhone}}</text>
        </view>
      </view>
      
      <view class="booking-actions" wx:if="{{item.canCancel}}">
        <view class="action-btn cancel" bindtap="onCancelBooking" data-id="{{item._id}}">
          å–æ¶ˆé¢„çº¦
        </view>
      </view>
      
      <view class="cancel-reason" wx:if="{{item.status === 'cancelled' && item.cancelReason}}">
        <text class="text-hint">å–æ¶ˆåŸå› : {{item.cancelReason}}</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-more" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- æ²¡æœ‰æ›´å¤š -->
  <view class="no-more" wx:if="{{!hasMore && bookings.length > 0}}">
    <text>â€” æ²¡æœ‰æ›´å¤šäº† â€”</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && bookings.length === 0}}">
    <view class="empty-icon">ğŸ“‹</view>
    <view class="empty-text">æš‚æ— é¢„çº¦è®°å½•</view>
    <navigator url="/pages/venue/list/list" open-type="switchTab" class="empty-btn">
      å»é¢„çº¦åœºé¦†
    </navigator>
  </view>
</view>
