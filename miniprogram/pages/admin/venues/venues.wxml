<!-- pages/admin/venues/venues.wxml -->
<view class="container">
  <!-- åœºé¦†åˆ—è¡¨ -->
  <view class="venue-list">
    <view 
      class="venue-item card"
      wx:for="{{venues}}"
      wx:key="_id"
    >
      <view class="venue-header">
        <view class="venue-name">{{item.name}}</view>
        <view class="venue-status {{item.enabled ? 'enabled' : 'disabled'}}">
          {{item.enabled ? 'å¯ç”¨ä¸­' : 'å·²åœç”¨'}}
        </view>
      </view>
      <view class="venue-info">
        <view class="info-row">
          <text>ç±»å‹: {{item.typeText}}</text>
          <text>ä»·æ ¼: Â¥{{item.price}}/å°æ—¶</text>
        </view>
        <view class="info-row">
          <text>ä½ç½®: {{item.location}}</text>
        </view>
        <view class="info-row">
          <text>è¥ä¸šæ—¶é—´: {{item.openTime}} - {{item.closeTime}}</text>
        </view>
      </view>
      <view class="venue-actions">
        <view class="action-btn edit" bindtap="showEditForm" data-venue="{{item}}">
          ç¼–è¾‘
        </view>
        <view 
          class="action-btn {{item.enabled ? 'disable' : 'enable'}}" 
          bindtap="toggleVenueStatus" 
          data-venue="{{item}}"
        >
          {{item.enabled ? 'åœç”¨' : 'å¯ç”¨'}}
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && venues.length === 0}}">
    <view class="empty-icon">ğŸŸï¸</view>
    <view class="empty-text">æš‚æ— åœºé¦†</view>
  </view>

  <!-- æ·»åŠ æŒ‰é’® -->
  <view class="add-btn" bindtap="showAddForm">+ æ·»åŠ åœºé¦†</view>

  <!-- è¡¨å•å¼¹çª— -->
  <view class="form-modal" wx:if="{{showForm}}">
    <view class="form-mask" bindtap="hideForm"></view>
    <view class="form-content">
      <view class="form-header">
        <view class="form-title">{{editMode ? 'ç¼–è¾‘åœºé¦†' : 'æ·»åŠ åœºé¦†'}}</view>
        <view class="form-close" bindtap="hideForm">Ã—</view>
      </view>
      
      <scroll-view class="form-body" scroll-y>
        <view class="form-group">
          <view class="form-label"><text class="required">*</text>åœºé¦†åç§°</view>
          <input 
            class="form-input" 
            placeholder="è¯·è¾“å…¥åœºé¦†åç§°"
            value="{{formData.name}}"
            data-field="name"
            bindinput="onInput"
          />
        </view>
        
        <view class="form-group">
          <view class="form-label"><text class="required">*</text>åœºé¦†ç±»å‹</view>
          <picker mode="selector" range="{{venueTypes}}" range-key="label" value="{{formData.typeIndex}}" bindchange="onTypeChange">
            <view class="form-picker">
              <text>{{venueTypes[formData.typeIndex].label}}</text>
              <text class="picker-arrow">></text>
            </view>
          </picker>
        </view>
        
        <view class="form-group">
          <view class="form-label"><text class="required">*</text>ä½ç½®</view>
          <input 
            class="form-input" 
            placeholder="è¯·è¾“å…¥åœºé¦†ä½ç½®"
            value="{{formData.location}}"
            data-field="location"
            bindinput="onInput"
          />
        </view>
        
        <view class="form-group">
          <view class="form-label"><text class="required">*</text>ä»·æ ¼ï¼ˆå…ƒ/å°æ—¶ï¼‰</view>
          <input 
            class="form-input" 
            type="digit"
            placeholder="è¯·è¾“å…¥ä»·æ ¼"
            value="{{formData.price}}"
            data-field="price"
            bindinput="onInput"
          />
        </view>
        
        <view class="form-group">
          <view class="form-label">å¼€æ”¾æ—¶é—´</view>
          <view class="time-row">
            <picker mode="time" value="{{formData.openTime}}" data-field="openTime" bindchange="onTimeChange">
              <view class="time-picker">{{formData.openTime}}</view>
            </picker>
            <text class="time-separator">è‡³</text>
            <picker mode="time" value="{{formData.closeTime}}" data-field="closeTime" bindchange="onTimeChange">
              <view class="time-picker">{{formData.closeTime}}</view>
            </picker>
          </view>
        </view>
        
        <view class="form-group">
          <view class="form-label">åœºé¦†ä»‹ç»</view>
          <textarea 
            class="form-textarea" 
            placeholder="è¯·è¾“å…¥åœºé¦†ä»‹ç»"
            value="{{formData.description}}"
            data-field="description"
            bindinput="onInput"
          ></textarea>
        </view>
        
        <view class="form-group switch-group">
          <view class="form-label">é¢„çº¦éœ€å®¡æ ¸</view>
          <switch checked="{{formData.needApproval}}" bindchange="onApprovalChange" color="#1890ff"/>
        </view>
      </scroll-view>
      
      <view class="form-footer">
        <view class="btn-cancel" bindtap="hideForm">å–æ¶ˆ</view>
        <view class="btn-save" bindtap="saveVenue">ä¿å­˜</view>
      </view>
    </view>
  </view>
</view>
